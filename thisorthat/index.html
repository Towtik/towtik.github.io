<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This or that?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #020617; color: #f8fafc; min-height: 100vh; overflow-x: hidden; }
        .glass { background: rgba(30, 41, 59, 0.4); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .choice-card { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); cursor: pointer; border: 2px solid transparent; }
        .choice-card:hover { transform: translateY(-8px); border-color: #38bdf8; background: rgba(56, 189, 248, 0.05); }
        .filter-btn { transition: all 0.2s; border: 1px solid #1e293b; font-weight: 600; }
        .filter-btn:hover { border-color: #38bdf8; background: rgba(56, 189, 248, 0.1); }
        .filter-btn.primary { background: #38bdf8; color: #020617; border-color: #38bdf8; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-in { animation: fadeIn 0.4s ease-out forwards; }
        .progress-bar { transition: width 0.5s ease-in-out; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
    </style>
</head>
<body class="p-4 md:p-8 flex flex-col items-center">

    <header class="w-full max-w-4xl text-center mb-8">
        <h1 class="text-4xl font-800 tracking-tighter text-sky-400 mb-2">This<span class="text-white">â€ OR</span><class="text-4xl font-800 tracking-tighter text-sky-400 mb-2"> â€ That</h1>
        <p class="text-slate-500 uppercase tracking-widest text-[10px] font-bold">Complete Global Elimination</p>
    </header>

    <div id="setup-screen" class="w-full max-w-4xl glass rounded-3xl p-8 animate-in">
        <h2 class="text-xl font-bold mb-6 text-center">Select a Tournament Pool</h2>
        
        <div class="space-y-8">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <button onclick="startTournament('World')" class="filter-btn primary py-4 rounded-2xl text-lg flex flex-col items-center justify-center">
                    <span class="text-2xl">ğŸŒ</span>
                    <span>The Whole World</span>
                    <span class="text-[10px] opacity-70 uppercase mt-1">195+ Countries</span>
                </button>
                <button onclick="startTournament('Europe')" class="filter-btn primary py-4 rounded-2xl text-lg flex flex-col items-center justify-center">
                    <span class="text-2xl">ğŸ‡ªğŸ‡º</span>
                    <span>Europe</span>
                    <span class="text-[10px] opacity-70 uppercase mt-1">44 Countries</span>
                </button>
                <button onclick="startTournament('Asia')" class="filter-btn primary py-4 rounded-2xl text-lg flex flex-col items-center justify-center">
                    <span class="text-2xl">ğŸ®</span>
                    <span>Asia</span>
                    <span class="text-[10px] opacity-70 uppercase mt-1">48 Countries</span>
                </button>
                <button onclick="startTournament('Americas')" class="filter-btn primary py-4 rounded-2xl text-lg flex flex-col items-center justify-center">
                    <span class="text-2xl">ğŸ—½</span>
                    <span>Americas</span>
                    <span class="text-[10px] opacity-70 uppercase mt-1">35 Countries</span>
                </button>
                <button onclick="startTournament('Africa')" class="filter-btn primary py-4 rounded-2xl text-lg flex flex-col items-center justify-center">
                    <span class="text-2xl">ğŸ¦</span>
                    <span>Africa</span>
                    <span class="text-[10px] opacity-70 uppercase mt-1">54 Countries</span>
                </button>
                <button onclick="startTournament('Oceania')" class="filter-btn primary py-4 rounded-2xl text-lg flex flex-col items-center justify-center">
                    <span class="text-2xl">ğŸ„</span>
                    <span>Oceania</span>
                    <span class="text-[10px] opacity-70 uppercase mt-1">14 Countries</span>
                </button>
            </div>
            <div class="pt-4 border-t border-slate-800">
                <p class="text-[10px] uppercase tracking-[0.2em] text-slate-500 mb-4 font-bold px-2 text-center">Detailed European Brackets</p>
                <div class="grid grid-cols-2 sm:grid-cols-5 gap-3">
                    <button onclick="startTournament('Central Europe')" class="filter-btn py-2.5 rounded-xl text-xs bg-slate-900/50">Central Europe</button>
                    <button onclick="startTournament('East Europe')" class="filter-btn py-2.5 rounded-xl text-xs bg-slate-900/50">East Europe</button>
                    <button onclick="startTournament('North Europe')" class="filter-btn py-2.5 rounded-xl text-xs bg-slate-900/50">North Europe</button>
                    <button onclick="startTournament('South Europe')" class="filter-btn py-2.5 rounded-xl text-xs bg-slate-900/50">South Europe</button>
                    <button onclick="startTournament('West Europe')" class="filter-btn py-2.5 rounded-xl text-xs bg-slate-900/50">West Europe</button>
                </div>
            </div>
        </div>
    </div>
    <div id="game-screen" class="hidden w-full max-w-5xl flex flex-col items-center">
        <div class="w-full max-w-2xl mb-8 space-y-2">
            <div class="flex justify-between text-xs font-bold uppercase tracking-widest text-slate-400">
                <span id="round-label">Round 1</span>
                <span id="match-label">Match 1/10</span>
            </div>
            <div class="w-full h-2 bg-slate-800 rounded-full overflow-hidden">
                <div id="progress" class="progress-bar h-full bg-sky-400 w-0"></div>
            </div>
        </div>

        <div class="relative grid grid-cols-1 md:grid-cols-2 gap-6 w-full">
            <div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-20 hidden md:block">
                <div class="w-14 h-14 rounded-full glass border-2 border-sky-500/30 flex items-center justify-center font-black italic text-sky-400 shadow-2xl">VS</div>
            </div>

            <div id="card-left" onclick="vote(0)" class="choice-card glass rounded-[2.5rem] p-12 flex flex-col items-center text-center">
                <span id="flag-0" class="text-8xl mb-6">ğŸ³ï¸</span>
                <h2 id="name-0" class="text-3xl font-bold mb-2">---</h2>
                <p id="reg-0" class="text-xs text-sky-400 font-bold tracking-widest uppercase">Region</p>
            </div>

            <div id="card-right" onclick="vote(1)" class="choice-card glass rounded-[2.5rem] p-12 flex flex-col items-center text-center">
                <span id="flag-1" class="text-8xl mb-6">ğŸ³ï¸</span>
                <h2 id="name-1" class="text-3xl font-bold mb-2">---</h2>
                <p id="reg-1" class="text-xs text-sky-400 font-bold tracking-widest uppercase">Region</p>
            </div>
        </div>
    </div>

    <div id="winner-screen" class="hidden w-full max-w-2xl glass rounded-[3rem] p-12 text-center animate-in shadow-2xl">
        <p class="text-sky-400 font-bold tracking-[0.3em] uppercase mb-4">The Ultimate Favorite</p>
        <span id="winner-flag" class="text-9xl mb-6 block">ğŸ†</span>
        <h2 id="winner-name" class="text-5xl font-black mb-8 italic">World Champion</h2>
        <button onclick="location.reload()" class="bg-white text-black px-10 py-4 rounded-full font-bold hover:bg-sky-400 transition-colors">Start New Tournament</button>
    </div>

    <script>
        const allCountries = [
            // CENTRAL EUROPE
            {n:"Austria",f:"ğŸ‡¦ğŸ‡¹",r:"Central Europe"}, {n:"Czechia",f:"ğŸ‡¨ğŸ‡¿",r:"Central Europe"}, {n:"Germany",f:"ğŸ‡©ğŸ‡ª",r:"Central Europe"}, {n:"Hungary",f:"ğŸ‡­ğŸ‡º",r:"Central Europe"}, {n:"Liechtenstein",f:"ğŸ‡±ğŸ‡®",r:"Central Europe"}, {n:"Poland",f:"ğŸ‡µğŸ‡±",r:"Central Europe"}, {n:"Slovakia",f:"ğŸ‡¸ğŸ‡°",r:"Central Europe"}, {n:"Switzerland",f:"ğŸ‡¨ğŸ‡­",r:"Central Europe"},
            // EAST EUROPE
            {n:"Belarus",f:"ğŸ‡§ğŸ‡¾",r:"East Europe"}, {n:"Bulgaria",f:"ğŸ‡§ğŸ‡¬",r:"East Europe"}, {n:"Moldova",f:"ğŸ‡²ğŸ‡©",r:"East Europe"}, {n:"Romania",f:"ğŸ‡·ğŸ‡´",r:"East Europe"}, {n:"Russia",f:"ğŸ‡·ğŸ‡º",r:"East Europe"}, {n:"Ukraine",f:"ğŸ‡ºğŸ‡¦",r:"East Europe"},
            // NORTH EUROPE
            {n:"Denmark",f:"ğŸ‡©ğŸ‡°",r:"North Europe"}, {n:"Estonia",f:"ğŸ‡ªğŸ‡ª",r:"North Europe"}, {n:"Finland",f:"ğŸ‡«ğŸ‡®",r:"North Europe"}, {n:"Iceland",f:"ğŸ‡®ğŸ‡¸",r:"North Europe"}, {n:"Ireland",f:"ğŸ‡®ğŸ‡ª",r:"North Europe"}, {n:"Latvia",f:"ğŸ‡±ğŸ‡»",r:"North Europe"}, {n:"Lithuania",f:"ğŸ‡±ğŸ‡¹",r:"North Europe"}, {n:"Norway",f:"ğŸ‡³ğŸ‡´",r:"North Europe"}, {n:"Sweden",f:"ğŸ‡¸ğŸ‡ª",r:"North Europe"}, {n:"United Kingdom",f:"ğŸ‡¬ğŸ‡§",r:"North Europe"},
            // SOUTH EUROPE
            {n:"Albania",f:"ğŸ‡¦ğŸ‡±",r:"South Europe"}, {n:"Andorra",f:"ğŸ‡¦ğŸ‡©",r:"South Europe"}, {n:"Bosnia",f:"ğŸ‡§ğŸ‡¦",r:"South Europe"}, {n:"Croatia",f:"ğŸ‡­ğŸ‡·",r:"South Europe"}, {n:"Greece",f:"ğŸ‡¬ğŸ‡·",r:"South Europe"}, {n:"Italy",f:"ğŸ‡®ğŸ‡¹",r:"South Europe"}, {n:"Malta",f:"ğŸ‡²ğŸ‡¹",r:"South Europe"}, {n:"Montenegro",f:"ğŸ‡²ğŸ‡ª",r:"South Europe"}, {n:"North Macedonia",f:"ğŸ‡²ğŸ‡°",r:"South Europe"}, {n:"Portugal",f:"ğŸ‡µğŸ‡¹",r:"South Europe"}, {n:"San Marino",f:"ğŸ‡¸ğŸ‡²",r:"South Europe"}, {n:"Serbia",f:"ğŸ‡·ğŸ‡¸",r:"South Europe"}, {n:"Slovenia",f:"ğŸ‡¸ğŸ‡®",r:"South Europe"}, {n:"Spain",f:"ğŸ‡ªğŸ‡¸",r:"South Europe"}, {n:"Vatican City",f:"ğŸ‡»ğŸ‡¦",r:"South Europe"},
            // WEST EUROPE
            {n:"Belgium",f:"ğŸ‡§ğŸ‡ª",r:"West Europe"}, {n:"France",f:"ğŸ‡«ğŸ‡·",r:"West Europe"}, {n:"Luxembourg",f:"ğŸ‡±ğŸ‡º",r:"West Europe"}, {n:"Monaco",f:"ğŸ‡²ğŸ‡¨",r:"West Europe"}, {n:"Netherlands",f:"ğŸ‡³ğŸ‡±",r:"West Europe"},
            // ASIA
            {n:"Afghanistan",f:"ğŸ‡¦ğŸ‡«",r:"Asia"}, {n:"Armenia",f:"ğŸ‡¦ğŸ‡²",r:"Asia"}, {n:"Azerbaijan",f:"ğŸ‡¦ğŸ‡¿",r:"Asia"}, {n:"Bahrain",f:"ğŸ‡§ğŸ‡­",r:"Asia"}, {n:"Bangladesh",f:"ğŸ‡§ğŸ‡©",r:"Asia"}, {n:"Bhutan",f:"ğŸ‡§ğŸ‡¹",r:"Asia"}, {n:"Brunei",f:"ğŸ‡§ğŸ‡³",r:"Asia"}, {n:"Cambodia",f:"ğŸ‡°ğŸ‡­",r:"Asia"}, {n:"China",f:"ğŸ‡¨ğŸ‡³",r:"Asia"}, {n:"Cyprus",f:"ğŸ‡¨ğŸ‡¾",r:"Asia"}, {n:"Georgia",f:"ğŸ‡¬ğŸ‡ª",r:"Asia"}, {n:"India",f:"ğŸ‡®ğŸ‡³",r:"Asia"}, {n:"Indonesia",f:"ğŸ‡®ğŸ‡©",r:"Asia"}, {n:"Iran",f:"ğŸ‡®ğŸ‡·",r:"Asia"}, {n:"Iraq",f:"ğŸ‡®ğŸ‡¶",r:"Asia"}, {n:"Israel",f:"ğŸ‡®ğŸ‡±",r:"Asia"}, {n:"Japan",f:"ğŸ‡¯ğŸ‡µ",r:"Asia"}, {n:"Jordan",f:"ğŸ‡¯ğŸ‡´",r:"Asia"}, {n:"Kazakhstan",f:"ğŸ‡°ğŸ‡¿",r:"Asia"}, {n:"Kuwait",f:"ğŸ‡°ğŸ‡¼",r:"Asia"}, {n:"Kyrgyzstan",f:"ğŸ‡°ğŸ‡¬",r:"Asia"}, {n:"Laos",f:"ğŸ‡±ğŸ‡¦",r:"Asia"}, {n:"Lebanon",f:"ğŸ‡±ğŸ‡§",r:"Asia"}, {n:"Malaysia",f:"ğŸ‡²ğŸ‡¾",r:"Asia"}, {n:"Maldives",f:"ğŸ‡²ğŸ‡»",r:"Asia"}, {n:"Mongolia",f:"ğŸ‡²ğŸ‡³",r:"Asia"}, {n:"Myanmar",f:"ğŸ‡²ğŸ‡²",r:"Asia"}, {n:"Nepal",f:"ğŸ‡³ğŸ‡µ",r:"Asia"}, {n:"North Korea",f:"ğŸ‡°ğŸ‡µ",r:"Asia"}, {n:"Oman",f:"ğŸ‡´ğŸ‡²",r:"Asia"}, {n:"Pakistan",f:"ğŸ‡µğŸ‡°",r:"Asia"}, {n:"Palestine",f:"ğŸ‡µğŸ‡¸",r:"Asia"}, {n:"Philippines",f:"ğŸ‡µğŸ‡­",r:"Asia"}, {n:"Qatar",f:"ğŸ‡¶ğŸ‡¦",r:"Asia"}, {n:"Saudi Arabia",f:"ğŸ‡¸ğŸ‡¦",r:"Asia"}, {n:"Singapore",f:"ğŸ‡¸ğŸ‡¬",r:"Asia"}, {n:"South Korea",f:"ğŸ‡°ğŸ‡·",r:"Asia"}, {n:"Sri Lanka",f:"ğŸ‡±ğŸ‡°",r:"Asia"}, {n:"Syria",f:"ğŸ‡¸ğŸ‡¾",r:"Asia"}, {n:"Taiwan",f:"ğŸ‡¹ğŸ‡¼",r:"Asia"}, {n:"Tajikistan",f:"ğŸ‡¹ğŸ‡¯",r:"Asia"}, {n:"Thailand",f:"ğŸ‡¹ğŸ‡­",r:"Asia"}, {n:"Timor-Leste",f:"ğŸ‡¹ğŸ‡±",r:"Asia"}, {n:"Turkey",f:"ğŸ‡¹ğŸ‡·",r:"Asia"}, {n:"Turkmenistan",f:"ğŸ‡¹ğŸ‡²",r:"Asia"}, {n:"UAE",f:"ğŸ‡¦ğŸ‡ª",r:"Asia"}, {n:"Uzbekistan",f:"ğŸ‡ºğŸ‡¿",r:"Asia"}, {n:"Vietnam",f:"ğŸ‡»ğŸ‡³",r:"Asia"}, {n:"Yemen",f:"ğŸ‡¾ğŸ‡ª",r:"Asia"},
            // AMERICAS
            {n:"Antigua",f:"ğŸ‡¦ğŸ‡¬",r:"Americas"}, {n:"Argentina",f:"ğŸ‡¦ğŸ‡·",r:"Americas"}, {n:"Bahamas",f:"ğŸ‡§ğŸ‡¸",r:"Americas"}, {n:"Barbados",f:"ğŸ‡§ğŸ‡§",r:"Americas"}, {n:"Belize",f:"ğŸ‡§ğŸ‡¿",r:"Americas"}, {n:"Bolivia",f:"ğŸ‡§ğŸ‡´",r:"Americas"}, {n:"Brazil",f:"ğŸ‡§ğŸ‡·",r:"Americas"}, {n:"Canada",f:"ğŸ‡¨ğŸ‡¦",r:"Americas"}, {n:"Chile",f:"ğŸ‡¨ğŸ‡±",r:"Americas"}, {n:"Colombia",f:"ğŸ‡¨ğŸ‡´",r:"Americas"}, {n:"Costa Rica",f:"ğŸ‡¨ğŸ‡·",r:"Americas"}, {n:"Cuba",f:"ğŸ‡¨ğŸ‡º",r:"Americas"}, {n:"Dominica",f:"ğŸ‡©ğŸ‡²",r:"Americas"}, {n:"Dominican Republic",f:"ğŸ‡©ğŸ‡´",r:"Americas"}, {n:"Ecuador",f:"ğŸ‡ªğŸ‡¨",r:"Americas"}, {n:"El Salvador",f:"ğŸ‡¸ğŸ‡»",r:"Americas"}, {n:"Grenada",f:"ğŸ‡¬ğŸ‡©",r:"Americas"}, {n:"Guatemala",f:"ğŸ‡¬ğŸ‡¹",r:"Americas"}, {n:"Guyana",f:"ğŸ‡¬ğŸ‡¾",r:"Americas"}, {n:"Haiti",f:"ğŸ‡­ğŸ‡¹",r:"Americas"}, {n:"Honduras",f:"ğŸ‡­ğŸ‡³",r:"Americas"}, {n:"Jamaica",f:"ğŸ‡¯ğŸ‡²",r:"Americas"}, {n:"Mexico",f:"ğŸ‡²ğŸ‡½",r:"Americas"}, {n:"Nicaragua",f:"ğŸ‡³ğŸ‡®",r:"Americas"}, {n:"Panama",f:"ğŸ‡µğŸ‡¦",r:"Americas"}, {n:"Paraguay",f:"ğŸ‡µğŸ‡¾",r:"Americas"}, {n:"Peru",f:"ğŸ‡µğŸ‡ª",r:"Americas"}, {n:"Saint Kitts",f:"ğŸ‡°ğŸ‡³",r:"Americas"}, {n:"Saint Lucia",f:"ğŸ‡±ğŸ‡¨",r:"Americas"}, {n:"Saint Vincent",f:"ğŸ‡»ğŸ‡¨",r:"Americas"}, {n:"Suriname",f:"ğŸ‡¸ğŸ‡·",r:"Americas"}, {n:"Trinidad",f:"ğŸ‡¹ğŸ‡¹",r:"Americas"}, {n:"USA",f:"ğŸ‡ºğŸ‡¸",r:"Americas"}, {n:"Uruguay",f:"ğŸ‡ºğŸ‡¾",r:"Americas"}, {n:"Venezuela",f:"ğŸ‡»ğŸ‡ª",r:"Americas"},
            // AFRICA
            {n:"Algeria",f:"ğŸ‡©ğŸ‡¿",r:"Africa"}, {n:"Angola",f:"ğŸ‡¦ğŸ‡´",r:"Africa"}, {n:"Benin",f:"ğŸ‡§ğŸ‡¯",r:"Africa"}, {n:"Botswana",f:"ğŸ‡§ğŸ‡¼",r:"Africa"}, {n:"Burkina Faso",f:"ğŸ‡§ğŸ‡«",r:"Africa"}, {n:"Burundi",f:"ğŸ‡§ğŸ‡®",r:"Africa"}, {n:"Cabo Verde",f:"ğŸ‡¨ğŸ‡»",r:"Africa"}, {n:"Cameroon",f:"ğŸ‡¨ğŸ‡²",r:"Africa"}, {n:"CAR",f:"ğŸ‡¨ğŸ‡«",r:"Africa"}, {n:"Chad",f:"ğŸ‡¹ğŸ‡©",r:"Africa"}, {n:"Comoros",f:"ğŸ‡°ğŸ‡²",r:"Africa"}, {n:"Congo",f:"ğŸ‡¨ğŸ‡¬",r:"Africa"}, {n:"DR Congo",f:"ğŸ‡¨ğŸ‡©",r:"Africa"}, {n:"Djibouti",f:"ğŸ‡©ğŸ‡¯",r:"Africa"}, {n:"Egypt",f:"ğŸ‡ªğŸ‡¬",r:"Africa"}, {n:"Equatorial Guinea",f:"ğŸ‡¬ğŸ‡¶",r:"Africa"}, {n:"Eritrea",f:"ğŸ‡ªğŸ‡·",r:"Africa"}, {n:"Eswatini",f:"ğŸ‡¸ğŸ‡¿",r:"Africa"}, {n:"Ethiopia",f:"ğŸ‡ªğŸ‡¹",r:"Africa"}, {n:"Gabon",f:"ğŸ‡¬ğŸ‡¦",r:"Africa"}, {n:"Gambia",f:"ğŸ‡¬ğŸ‡²",r:"Africa"}, {n:"Ghana",f:"ğŸ‡¬ğŸ‡­",r:"Africa"}, {n:"Guinea",f:"ğŸ‡¬ğŸ‡³",r:"Africa"}, {n:"Guinea-Bissau",f:"ğŸ‡¬ğŸ‡¼",r:"Africa"}, {n:"Ivory Coast",f:"ğŸ‡¨ğŸ‡®",r:"Africa"}, {n:"Kenya",f:"ğŸ‡°ğŸ‡ª",r:"Africa"}, {n:"Lesotho",f:"ğŸ‡±ğŸ‡¸",r:"Africa"}, {n:"Liberia",f:"ğŸ‡±ğŸ‡·",r:"Africa"}, {n:"Libya",f:"ğŸ‡±ğŸ‡¾",r:"Africa"}, {n:"Madagascar",f:"ğŸ‡²ğŸ‡¬",r:"Africa"}, {n:"Malawi",f:"ğŸ‡²ğŸ‡¼",r:"Africa"}, {n:"Mali",f:"ğŸ‡²ğŸ‡±",r:"Africa"}, {n:"Mauritania",f:"ğŸ‡²ğŸ‡·",r:"Africa"}, {n:"Mauritius",f:"ğŸ‡²ğŸ‡º",r:"Africa"}, {n:"Morocco",f:"ğŸ‡²ğŸ‡¦",r:"Africa"}, {n:"Mozambique",f:"ğŸ‡²ğŸ‡¿",r:"Africa"}, {n:"Namibia",f:"ğŸ‡³ğŸ‡¦",r:"Africa"}, {n:"Niger",f:"ğŸ‡³ğŸ‡ª",r:"Africa"}, {n:"Nigeria",f:"ğŸ‡³ğŸ‡¬",r:"Africa"}, {n:"Rwanda",f:"ğŸ‡·ğŸ‡¼",r:"Africa"}, {n:"Sao Tome",f:"ğŸ‡¸ğŸ‡¹",r:"Africa"}, {n:"Senegal",f:"ğŸ‡¸ğŸ‡³",r:"Africa"}, {n:"Seychelles",f:"ğŸ‡¸ğŸ‡¨",r:"Africa"}, {n:"Sierra Leone",f:"ğŸ‡¸ğŸ‡±",r:"Africa"}, {n:"Somalia",f:"ğŸ‡¸ğŸ‡´",r:"Africa"}, {n:"South Africa",f:"ğŸ‡¿ğŸ‡¦",r:"Africa"}, {n:"South Sudan",f:"ğŸ‡¸ğŸ‡¸",r:"Africa"}, {n:"Sudan",f:"ğŸ‡¸ğŸ‡©",r:"Africa"}, {n:"Tanzania",f:"ğŸ‡¹ğŸ‡¿",r:"Africa"}, {n:"Togo",f:"ğŸ‡¹ğŸ‡¬",r:"Africa"}, {n:"Tunisia",f:"ğŸ‡¹ğŸ‡³",r:"Africa"}, {n:"Uganda",f:"ğŸ‡ºğŸ‡¬",r:"Africa"}, {n:"Zambia",f:"ğŸ‡¿ğŸ‡²",r:"Africa"}, {n:"Zimbabwe",f:"ğŸ‡¿ğŸ‡¼",r:"Africa"},
            // OCEANIA
            {n:"Australia",f:"ğŸ‡¦ğŸ‡º",r:"Oceania"}, {n:"Fiji",f:"ğŸ‡«ğŸ‡¯",r:"Oceania"}, {n:"Kiribati",f:"ğŸ‡°ğŸ‡®",r:"Oceania"}, {n:"Marshall Islands",f:"ğŸ‡²ğŸ‡­",r:"Oceania"}, {n:"Micronesia",f:"ğŸ‡«ğŸ‡²",r:"Oceania"}, {n:"Nauru",f:"ğŸ‡³ğŸ‡·",r:"Oceania"}, {n:"New Zealand",f:"ğŸ‡³ğŸ‡¿",r:"Oceania"}, {n:"Palau",f:"ğŸ‡µğŸ‡¼",r:"Oceania"}, {n:"Papua New Guinea",f:"ğŸ‡µğŸ‡¬",r:"Oceania"}, {n:"Samoa",f:"ğŸ‡¼ğŸ‡¸",r:"Oceania"}, {n:"Solomon Islands",f:"ğŸ‡¸ğŸ‡§",r:"Oceania"}, {n:"Tonga",f:"ğŸ‡¹ğŸ‡´",r:"Oceania"}, {n:"Tuvalu",f:"ğŸ‡¹ğŸ‡»",r:"Oceania"}, {n:"Vanuatu",f:"ğŸ‡»ğŸ‡º",r:"Oceania"}
        ];

        let tournamentPool = [];
        let winners = [];
        let matchIdx = 0;
        let round = 1;

        function startTournament(region) {
            let pool = [];
            if (region === 'World') pool = [...allCountries];
            else if (region === 'Europe') pool = allCountries.filter(c => c.r.includes('Europe'));
            else pool = allCountries.filter(c => c.r === region);

            tournamentPool = pool.sort(() => Math.random() - 0.5);
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            updateMatch();
        }

        function updateMatch() {
            if (matchIdx * 2 >= tournamentPool.length) {
                tournamentPool = [...winners];
                winners = [];
                matchIdx = 0;
                round++;

                if (tournamentPool.length === 1) {
                    finish(tournamentPool[0]);
                    return;
                }
            }

            const c1 = tournamentPool[matchIdx * 2];
            const c2 = tournamentPool[matchIdx * 2 + 1];

            if (!c2) {
                winners.push(c1);
                matchIdx++;
                updateMatch();
                return;
            }

            const totalMatchesInRound = Math.floor(tournamentPool.length / 2);
            document.getElementById('round-label').innerText = tournamentPool.length === 2 ? "The Grand Finale" : `Round ${round}`;
            document.getElementById('match-label').innerText = `Match ${matchIdx + 1} / ${totalMatchesInRound}`;
            document.getElementById('progress').style.width = `${(matchIdx / totalMatchesInRound) * 100}%`;

            setCard(0, c1);
            setCard(1, c2);
        }

        function setCard(side, country) {
            document.getElementById(`flag-${side}`).innerText = country.f;
            document.getElementById(`name-${side}`).innerText = country.n;
            document.getElementById(`reg-${side}`).innerText = country.r;
            const el = document.getElementById(side === 0 ? 'card-left' : 'card-right');
            el.classList.remove('animate-in');
            void el.offsetWidth;
            el.classList.add('animate-in');
        }

        function vote(idx) {
            winners.push(tournamentPool[matchIdx * 2 + idx]);
            matchIdx++;
            updateMatch();
        }

        function finish(winner) {
            document.getElementById('game-screen').classList.add('hidden');
            const ws = document.getElementById('winner-screen');
            ws.classList.remove('hidden');
            document.getElementById('winner-flag').innerText = winner.f;
            document.getElementById('winner-name').innerText = winner.n;
        }

        window.onkeydown = (e) => {
            if (e.key === 'ArrowLeft') vote(0);
            if (e.key === 'ArrowRight') vote(1);
        };
    </script>
</body>
</html>